{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-EV9CT8BPK0"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-EV9CT8BPK0');
    </script>

    <title>The Price Marketplace</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <meta name="google-adsense-account" content="ca-pub-4243484594296244">
    <meta name="google-site-verification" content="_9zQuccnuGNOy6hcgwzaL0RojmCTwTrzI142h85Lz-s" />
    <!-- Tags for Infolinks monitization
    <script type="text/javascript"> var infolinks_pid = 3441023; var infolinks_wsid = 0; </script> <script type="text/javascript" src="//resources.infolinks.com/js/infolinks_main.js"></script> -->

    <!-- Tags for Monetag monitization -->
    <!--  <meta name="monetag" content="62932b27aa65a02dcdb8c8189e236feb">
    <script src="https://upskittyan.com/act/files/tag.min.js?z=9964947" data-cfasync="false" async></script> 
    <script src="https://vaugroar.com/act/files/tag.min.js?z=9964947" data-cfasync="false" async></script>
    <script>(function(s){s.dataset.zone='9979969',s.src='https://gizokraijaw.net/vignette.min.js'})([document.documentElement, document.body].filter(Boolean).pop().appendChild(document.createElement('script')))</script>
    <script>(function(s){s.dataset.zone='9964923',s.src='https://forfrogadiertor.com/tag.min.js'})([document.documentElement, document.body].filter(Boolean).pop().appendChild(document.createElement('script')))</script>
    <script src="https://eechicha.com/act/files/tag.min.js?z=9964947" data-cfasync="false" async></script>
    <script>(function(s){s.dataset.zone='9980044',s.src='https://al5sm.com/tag.min.js'})([document.documentElement, document.body].filter(Boolean).pop().appendChild(document.createElement('script')))</script>-->

    <!-- Open Graph Meta -->
    <meta property="og:title" content="The Price Marketplace" />
    <meta property="og:description" content="Your marketplace for everyday foodstuff prices." />
    <meta property="og:image" content="{{ request.scheme }}://{{ request.get_host }}/img/the-price-marketplace.png" />
    <meta property="og:url" content="{{ request.scheme }}://{{ request.get_host }}{{ request.path }}" />
    <meta property="og:type" content="website" />
    
    <!-- Vercel analytics tag -->
    <script defer src="/_vercel/insights/script.js"></script>
    <style>
        /* This is the primary fix for the dark mode issue. */
        /* It makes sure the dark-mode class overrides Bootstrap. */
        /* Dark mode base */
    /* Define color variables for both themes */
    :root {
        --bg-color: #fff;
        --text-color: #333;
        --surface-color: #f8f9fa;
        --card-color: #fff;
        --border-color: #dee2e6;
    }

    .dark-mode {
        --bg-color: darkslategray;
        --text-color: #ffffff;
        --surface-color: #212121;
        --card-color: #2c2c2c;
        --border-color: #424242;
    }

    body {
        background-color: var(--bg-color);
        color: var(--text-color);
        padding-top: 4rem;
    }

    /* Navbar 
    .navbar {
        background-color: var(--surface-color);
    }
    .nav-link,
    .navbar-brand,
    .navbar-toggler-icon,
    .btn-link {
        color: var(--text-color);
    }
    */
    /* Cards */
    .card {
        background-color: var(--card-color);
        color: var(--text-color);
        border-color: var(--border-color);
    }

    /* Accordion */
    .accordion-body {
        background-color: var(--card-color);
        color: var(--text-color);
    }

    /* List groups */
    .list-group-item {
        background-color: var(--surface-color);
        color: var(--text-color);
        border-color: var(--border-color);
    }

    /* Footer */
    footer {
        background-color: var(--surface-color);
        color: var(--text-color);
    }

    /* Buttons 
    .btn {
        background-color: var(--surface-color);
        color: var(--text-color);
        border-color: var(--border-color);
    }
    */
    /* Tables */
    table {
        background-color: var(--card-color);
        color: var(--text-color);
        border-color: var(--border-color);
    }
    th, 
    td {
        border-color: var(--border-color);
    }
    thead {
        background-color: var(--surface-color);
    }

    /* Forms */
    input,
    select,
    textarea {
        background-color: var(--surface-color);
        color: var(--text-color);
        border: 1px solid var(--border-color);
    }
    input::placeholder,
    textarea::placeholder {
        color: #bbb;
    }
    .dark-mode input::placeholder,
    .dark-mode textarea::placeholder {
        color: #aaa;
    }
    .dark-mode .badge {
        background-color: #444;
        color: white;
    }
    .dark-mode .btn:hover {
        background-color: #333;
    }

    .card {
        float:inline-start;
        width: 600px;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
        text-align: center;
        font-family: arial;
    }
    button:hover {
        opacity: 0.8;
    }
    /* FIX: Adjusted body styles to correctly position the footer */
    /* We remove the padding-bottom and use a flexbox layout. */
    body {
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        padding-right: 5%;
        padding-left: 5%;
    }
    /* This makes the main content area take up all available space, pushing the footer down. */
    .content-wrap {
        flex-grow: 1;
    }
    a {
        display: inline-block;
        color: white;
        background-color: #000;
        text-align: center;
        cursor: pointer;
        width: auto;
        font-size: 18px;
    }
    p {
        padding-top: 2%;
        padding-left: 5%;
        padding-right: 5%;
    }
    .privacy-policy {
    background: none !important;
    border: none !important;
    text-decoration: none;
    color: #0d6efd; /* Bootstrap blue, or choose your color */
    }

    .privacy-policy:hover,
    .privacy-policy:focus {
    text-decoration: underline; /* keep a simple hover effect */
    outline: none !important;
    box-shadow: none !important;
    }

    #BackToTop {
        position: fixed;
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        display: none;
        bottom: 30px;
        right: 30px;
        height: 60px;
        width: 60px;
        text-align: center;
        border: none;
        border-radius: 50%;
        font-size: 20px;
        cursor: pointer;
        color:#fff;
        background-color: #88b4e3;
        z-index: 99;

    }
    </style>
    
    <script>
        function applySavedTheme() {
            const savedTheme = localStorage.getItem("theme");
            if (savedTheme === "dark") {
                document.documentElement.classList.add("dark-mode");
            }
        }
        applySavedTheme();

        function toggleTheme() {
            document.documentElement.classList.toggle("dark-mode");
            const currentTheme = document.documentElement.classList.contains("dark-mode") ? "dark" : "light";
            localStorage.setItem("theme", currentTheme);
        }
    </script>
</head>
<body>

<nav class="navbar py-3 navbar-expand-md bg-dark navbar-dark fixed-top">
    <div class="container-fluid d-flex align-items-center justify-content-between">
        <a class="navbar-brand bg-dark" href="{% url 'main' %}">
            <img src="/img/the-price-marketplace.png" alt="App Logo" style="width: 40px;" class="rounded-pill">
            <span class="ms-2">The Price Marketplace</span>
        </a>
        <button class="navbar-toggler ms-auto" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavbar" style="flex-shrink: 0;">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="mainNavbar">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'main' %}">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'about' %}">About</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'blog_list' %}">Blog</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'terms' %}">Grocery Terms</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'contact' %}">Contact</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'stores' %}">Stores</a>
                </li>
                {% if user.is_authenticated %}
                    <li class="nav-item">
                        <a href="{% url 'logout' %}" class="nav-link">Logout</a>
                    </li>
                {% else %}
                    <li class="nav-item">
                        <a href="{% url 'login' %}" class="nav-link">Login</a>
                    </li>
                {% endif %}
                <li class="nav-item">
                    <form class="d-flex" action="{% url 'search_results' %}" method="post">
                        {% csrf_token %}
                        <input class="form-control me-2" type="text" placeholder="Search" name="searched"
                        aria-label="Search" style="width:250px;">
                        <button class="btn btn-outline-success" type="submit">Search</button>
                    </form>
                </li>
            </ul>
            <!--
            <ul class="navbar-nav">
                <li class="nav-item me-2">
                    <button class="btn btn-primary" onclick="toggleTheme()">ðŸŒ—</button>
                </li>
            </ul>
            -->
        </div>
    </div>
</nav>

<div class="content-wrap">
    {% if messages %}
        <div class="container mt-3">
            {% for message in messages %}
                <div class="alert alert-success">{{ message }}</div>
            {% endfor %}
        </div>
    {% endif %}

    {% block content %}
    {% endblock content %}
</div>

<button id="BackToTop" title="BackToTop"><strong>â†‘</strong></button>

<footer class="mt-5 py-3 bg-dark text-white text-center">
    <div class="container-fluid">
        <span>Â© 2026 The Price Marketplace. All rights reserved.</span> 
        <span><a href="{% url 'privacy' %}" class="privacy-policy">Privacy Policy</a></span>
    </div>
</footer>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
    const BackToTop = document.getElementById("BackToTop");
    window.onscroll = function () {
        if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
            BackToTop.style.display = "block";
        } else {
            BackToTop.style.display = "none";
        };
    };

    BackToTop.addEventListener("click", function () {
        window.scrollTo({ top: 0, behavior: "smooth" });
    });
</script>

</body>
</html>